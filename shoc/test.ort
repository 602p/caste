
extern(...) printf -> int
extern(int amt) malloc -> ptr

type Foo is
	ptr data
	Foo next

	function(ptr data) Foo::make -> Foo does
		Foo new = malloc(@sizeof(Foo)@)|Foo
		new.data=data
		new.next=null|Foo
	return new
endtype

type Bar is
	int len
	Foo f
	Foo f2

	function() Bar::make -> Bar does
		Bar new = malloc(@sizeof(Bar)@)|Bar
		new.len=0
	return new
endtype

function() main -> int does
	Bar b = Bar::make()
	Foo f = Foo::make("nutshack")
	b.f=f
	printf("%s\n", b.f.data)
	printf("%s\n", f.data)
return 0